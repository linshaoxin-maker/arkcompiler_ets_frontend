{"version":3,"file":"SdkTSCCompiledProgram.js","names":["_ArkTSTimePrinter","require","_SdkTypeScriptDiagnosticsExtractor","_defineProperty","e","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","SdkTSCCompiledProgram","constructor","builerProgram","getProgram","getBuilderProgram","getStrictDiagnostics","fileName","updateCompilationDiagnostics","getSemanticDiagnostics","timePrinterInstance","ArkTSLinterTimePrinter","getInstance","appendTime","TimePhase","STRICT_PROGRAM_GET_SEMANTIC_DIAGNOSTICS","getSyntacticDiagnostics","STRICT_PROGRAM_GET_SYNTACTIC_DIAGNOSTICS","exports"],"sources":["../../../sdk/linter_1_1/SdkTSCCompiledProgram.ts"],"sourcesContent":["/*\n * Copyright (c) 2024 Huawei Device Co., Ltd.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, softwareP\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type * as ts from 'typescript';\nimport { ArkTSLinterTimePrinter, TimePhase } from '../ArkTSTimePrinter';\nimport type { TSCCompiledProgram } from '../../lib/ts-diagnostics/TSCCompiledProgram';\nimport { getStrictDiagnostics } from './SdkTypeScriptDiagnosticsExtractor';\n\nexport class SdkTSCCompiledProgram implements TSCCompiledProgram {\n  private readonly builerProgram: ts.BuilderProgram;\n\n  constructor(builerProgram: ts.BuilderProgram) {\n    this.builerProgram = builerProgram;\n  }\n\n  getProgram(): ts.Program {\n    return this.builerProgram.getProgram();\n  }\n\n  getBuilderProgram(): ts.BuilderProgram {\n    return this.builerProgram;\n  }\n\n  getStrictDiagnostics(fileName: string): ts.Diagnostic[] {\n    return getStrictDiagnostics(this.getBuilderProgram(), fileName);\n  }\n\n  /**\n   * Updates all diagnostics in TSC compilation program after the incremental build.\n   */\n  updateCompilationDiagnostics(): void {\n    this.builerProgram.getSemanticDiagnostics();\n    const timePrinterInstance = ArkTSLinterTimePrinter.getInstance();\n    timePrinterInstance.appendTime(TimePhase.STRICT_PROGRAM_GET_SEMANTIC_DIAGNOSTICS);\n    this.builerProgram.getSyntacticDiagnostics();\n    timePrinterInstance.appendTime(TimePhase.STRICT_PROGRAM_GET_SYNTACTIC_DIAGNOSTICS);\n  }\n}\n"],"mappings":";;;;;;AAgBA,IAAAA,iBAAA,GAAAC,OAAA;AAEA,IAAAC,kCAAA,GAAAD,OAAA;AAA2E,SAAAE,gBAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAD,CAAA,GAAAI,MAAA,CAAAC,cAAA,CAAAL,CAAA,EAAAC,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAT,CAAA,CAAAC,CAAA,IAAAC,CAAA,EAAAF,CAAA;AAAA,SAAAG,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAb,CAAA,QAAAU,CAAA,GAAAV,CAAA,CAAAc,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA,KAlB3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAOO,MAAMgB,qBAAqB,CAA+B;EAG/DC,WAAWA,CAACC,aAAgC,EAAE;IAAArB,eAAA;IAC5C,IAAI,CAACqB,aAAa,GAAGA,aAAa;EACpC;EAEAC,UAAUA,CAAA,EAAe;IACvB,OAAO,IAAI,CAACD,aAAa,CAACC,UAAU,CAAC,CAAC;EACxC;EAEAC,iBAAiBA,CAAA,EAAsB;IACrC,OAAO,IAAI,CAACF,aAAa;EAC3B;EAEAG,oBAAoBA,CAACC,QAAgB,EAAmB;IACtD,OAAO,IAAAD,uDAAoB,EAAC,IAAI,CAACD,iBAAiB,CAAC,CAAC,EAAEE,QAAQ,CAAC;EACjE;;EAEA;AACF;AACA;EACEC,4BAA4BA,CAAA,EAAS;IACnC,IAAI,CAACL,aAAa,CAACM,sBAAsB,CAAC,CAAC;IAC3C,MAAMC,mBAAmB,GAAGC,wCAAsB,CAACC,WAAW,CAAC,CAAC;IAChEF,mBAAmB,CAACG,UAAU,CAACC,2BAAS,CAACC,uCAAuC,CAAC;IACjF,IAAI,CAACZ,aAAa,CAACa,uBAAuB,CAAC,CAAC;IAC5CN,mBAAmB,CAACG,UAAU,CAACC,2BAAS,CAACG,wCAAwC,CAAC;EACpF;AACF;AAACC,OAAA,CAAAjB,qBAAA,GAAAA,qBAAA","ignoreList":[]}